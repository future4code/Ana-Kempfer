{"ast":null,"code":"import _regeneratorRuntime from \"/home/skempfer/\\xC1rea de Trabalho/Ana-Kempfer/semana10/futureX/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/skempfer/\\xC1rea de Trabalho/Ana-Kempfer/semana10/futureX/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport axios from \"axios\";\nimport { push } from \"connected-react-router\";\nimport { routes } from \"../containers/Router\";\nimport { getTripDetail } from \"./trips\"; //FUNÇÕES ASSINCRONAS\n\nexport var autenticateLogin = function autenticateLogin(email, password) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(dispatch) {\n        var body, response, userToken;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                body = {\n                  email: email,\n                  password: password\n                };\n                _context.prev = 1;\n                _context.next = 4;\n                return axios.post(\"https://us-central1-missao-newton.cloudfunctions.net/futureX/anaKempfer/login\", body);\n\n              case 4:\n                response = _context.sent;\n                userToken = response.data.token;\n                window.localStorage.setItem(\"token\", userToken);\n                dispatch(push(routes.admPanel));\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](1);\n                alert(\"Erro ao fazer login.\");\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 10]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()\n  );\n};\nexport var applicateUser = function applicateUser(form) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(dispatch) {\n        var formData;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                formData = {\n                  name: form.name,\n                  age: form.age,\n                  applicationText: form.applicationText,\n                  profession: form.profession,\n                  country: form.country\n                };\n                _context2.prev = 1;\n                _context2.next = 4;\n                return axios.post(\"https://us-central1-missao-newton.cloudfunctions.net/futureX/anaKempfer/trips/\".concat(form.tripId, \"/apply\"), formData);\n\n              case 4:\n                window.alert(\"Inscrição realizada com sucesso.\");\n                _context2.next = 10;\n                break;\n\n              case 7:\n                _context2.prev = 7;\n                _context2.t0 = _context2[\"catch\"](1);\n                window.alert(\"Ocorreu um erro. Tente aplicar novamente.\");\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[1, 7]]);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }()\n  );\n};\nexport var approveCandidate = function approveCandidate(tripId, candidateId, response) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(dispatch) {\n        var config, data;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                config = {\n                  headers: {\n                    'auth': window.localStorage.getItem(\"token\")\n                  }\n                };\n                data = {\n                  approve: response\n                };\n                _context3.prev = 2;\n                _context3.next = 5;\n                return axios.put(\"https://us-central1-missao-newton.cloudfunctions.net/futureX/anakempfer/trips/\".concat(tripId, \"/candidates/\").concat(candidateId, \"/decide\"), data, config);\n\n              case 5:\n                dispatch(getTripDetail(tripId));\n                _context3.next = 11;\n                break;\n\n              case 8:\n                _context3.prev = 8;\n                _context3.t0 = _context3[\"catch\"](2);\n                alert(\"Erro ao tentar aprovar candidato.\");\n\n              case 11:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[2, 8]]);\n      }));\n\n      return function (_x3) {\n        return _ref3.apply(this, arguments);\n      };\n    }()\n  );\n};","map":{"version":3,"sources":["/home/skempfer/Área de Trabalho/Ana-Kempfer/semana10/futureX/src/actions/user.js"],"names":["axios","push","routes","getTripDetail","autenticateLogin","email","password","dispatch","body","post","response","userToken","data","token","window","localStorage","setItem","admPanel","alert","applicateUser","form","formData","name","age","applicationText","profession","country","tripId","approveCandidate","candidateId","config","headers","getItem","approve","put"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { push } from \"connected-react-router\";\nimport { routes } from \"../containers/Router\";\nimport { getTripDetail } from \"./trips\";\n\n\n//FUNÇÕES ASSINCRONAS\n\nexport const autenticateLogin = (email, password) => async (dispatch) => {\n    const body = {\n        email: email,\n        password: password,\n    }\n    try {\n        const response = await axios.post(`https://us-central1-missao-newton.cloudfunctions.net/futureX/anaKempfer/login`, body);\n        \n        const userToken = response.data.token;\n        window.localStorage.setItem(\"token\", userToken);\n        dispatch(push(routes.admPanel));\n\n    } catch(error) {\n        alert(\"Erro ao fazer login.\")\n    }\n}\n\n\nexport const applicateUser = (form) => async (dispatch) => {\n    const formData = {\n        name: form.name,\n        age: form.age,\n        applicationText: form.applicationText,\n        profession: form.profession,\n        country: form.country,\n    }\n\n    try {\n        await axios.post(`https://us-central1-missao-newton.cloudfunctions.net/futureX/anaKempfer/trips/${form.tripId}/apply`, formData)\n\n        window.alert(\"Inscrição realizada com sucesso.\")\n    } catch(error) {\n        window.alert(\"Ocorreu um erro. Tente aplicar novamente.\")\n    }\n}\n\n\nexport const approveCandidate = (tripId, candidateId, response) => async (dispatch) => {\n    const config = {\n        headers:{\n            'auth': window.localStorage.getItem(\"token\")\n        }\n    }\n\n    const data = {\n        approve: response\n    }\n    \n    try {\n        await axios.put(`https://us-central1-missao-newton.cloudfunctions.net/futureX/anakempfer/trips/${tripId}/candidates/${candidateId}/decide`, data, config)\n\n        dispatch(getTripDetail(tripId))\n    } catch(error) {\n        alert(\"Erro ao tentar aprovar candidato.\")\n    }\n}"]},"metadata":{},"sourceType":"module"}